import{x as r}from"./scheduler.55267da8.js";import{v as a,s as d}from"./UserCtrlWidget.47ea984c.js";async function p(s,t,e){const o=document.querySelector(s);if(!o)return;if(t===""){o.src="";return}const i="/api?op=file"+(e?"&thumb="+e.toString():"")+"&file="+encodeURIComponent(t),n=await fetch(i);if(n.ok){const c=await n.blob();o.src=URL.createObjectURL(c),o.onload=()=>{URL.revokeObjectURL(o.src)}}else throw new Error(`HTTP error, status = ${n.status}`)}async function f(s){let t={};const e=await fetch("/api?op=dir&path="+encodeURIComponent(s));if(e.ok)t=await e.json();else throw new Error(`HTTP error, status = ${e.status}`);return t}function m(s){function t(o){window.removeEventListener("message",t),o.data==="mounted"&&(e.postMessage({settings:r(d)},"*"),e.postMessage(s,"*"))}let e=r(a);e&&!e.closed?e.postMessage(s,"*"):(e=open("/viewer"),window.addEventListener("message",t),a.set(e))}export{f as a,p as l,m as o};
